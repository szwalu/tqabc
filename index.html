<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tqabc.com - 您的智能工具导航</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lucide-static@latest/font/lucide.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    body {
        font-family: 'Inter', sans-serif;
        transition: margin-left 0.3s ease-in-out;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
    .dark ::-webkit-scrollbar-thumb { background: #475569; }
    ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    .dark ::-webkit-scrollbar-thumb:hover { background: #64748b; }

    /* Sidebar Styles */
    .app-sidebar {
        position: fixed; top: 0; left: -280px; width: 280px; height: 100vh;
        background-color: #ffffff; box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        padding-top: 1rem; z-index: 40; transition: left 0.3s ease-in-out; overflow-y: auto;
    }
    .dark .app-sidebar { background-color: #1f2937; border-right: 1px solid #374151; }
    .sidebar-open .app-sidebar { left: 0; }
    .app-sidebar ul { list-style: none; padding: 0; margin: 0; }
    .app-sidebar ul li a {
        display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1.5rem; font-size: 0.95rem;
        color: #374151; cursor: pointer; transition: background-color 0.2s, color 0.2s;
        border-left: 3px solid transparent;
    }
    .dark .app-sidebar ul li a { color: #d1d5db; }
    .app-sidebar ul li a:hover, .app-sidebar ul li a.active {
        background-color: #eff6ff; color: #2563eb; border-left-color: #2563eb;
    }
    .dark .app-sidebar ul li a:hover, .dark .app-sidebar ul li a.active {
        background-color: #374151; color: #60a5fa; border-left-color: #60a5fa;
    }
    .app-sidebar ul li a .lucide { width: 1.125rem; height: 1.125rem; }

    @media (min-width: 1024px) { .sidebar-open .main-content-pusher { margin-left: 280px; } }
    .sidebar-overlay {
        display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
        background-color: rgba(0, 0, 0, 0.5); z-index: 39;
    }
    .sidebar-open .sidebar-overlay { display: block; }

    /* Header Search Box with Select - Refined */
    .header-search-container {
        display: flex; align-items: center;
        flex-grow: 1; max-width: 600px; margin: 0 1rem;
    }
    .search-engine-select {
        appearance: none; -webkit-appearance: none; -moz-appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%236b7280' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");
        background-repeat: no-repeat; background-position: right 0.5rem center; background-size: 1em 1em;
        padding: 0.25rem 1.75rem 0.25rem 0.5rem;
        margin-right: -1px; border: 1px solid #d1d5db; border-right: none;
        border-radius: 0.375rem 0 0 0.375rem; background-color: #f9fafb;
        color: #374151; font-size: 0.875rem; line-height: 1.25rem;
        height: 2.25rem; cursor: pointer; outline: none; transition: border-color 0.2s ease;
        flex-shrink: 0;
    }
    .dark .search-engine-select {
        background-color: #374151; border-color: #4b5563; color: #d1d5db;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%239ca3af' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");
    }
     .search-engine-select:focus { border-color: #3b82f6; box-shadow: 0 0 0 1px #3b82f6; }
    .dark .search-engine-select:focus { border-color: #60a5fa; box-shadow: 0 0 0 1px #60a5fa; }

    .s-search-form {
        display: flex; flex-grow: 1;
        border: 1px solid #d1d5db; border-radius: 0 0.375rem 0.375rem 0;
        overflow: hidden; background-color: #ffffff; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        height: 2.25rem; min-width: 0;
    }
    .dark .s-search-form { border-color: #4b5563; background-color: #1f2937; }
    .s-search-input {
        flex-grow: 1; padding: 0.25rem 0.75rem; font-size: 0.875rem;
        border: none; outline: none; background: transparent; color: #1f2937;
        min-width: 50px;
    }
    .dark .s-search-input { color: #f3f4f6; }
    .s-search-input::placeholder { color: #9ca3af; }
    .dark .s-search-input::placeholder { color: #6b7280; }
    .s-search-button {
        padding: 0 0.75rem; font-size: 0.875rem; border: none;
        background-color: #3b82f6; color: white; cursor: pointer;
        transition: background-color 0.2s ease; display: flex;
        align-items: center; justify-content: center;
        flex-shrink: 0;
    }
    .s-search-button:hover { background-color: #2563eb; }
    .s-search-button .fa-search { font-size: 0.9em; }

    /* Horizontal News Section */
    .horizontal-news-container { margin-bottom: 1.5rem; }
    .horizontal-news-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem; }
    #newsListHorizontal {
        display: flex; overflow-x: auto; padding-bottom: 1rem; gap: 1rem;
    }
    #newsListHorizontal li {
        flex: 0 0 auto; width: 280px; background-color: #ffffff;
        border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
        padding: 1rem; transition: transform 0.2s ease-in-out;
    }
    .dark #newsListHorizontal li { background-color: #1f2937; }
    #newsListHorizontal li:hover { transform: translateY(-4px); }
    #newsListHorizontal a {
        display: block; font-size: 0.875rem; font-weight: 500; line-height: 1.4; color: #3b82f6;
        display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 3;
        overflow: hidden; text-overflow: ellipsis; max-height: calc(1.4em * 3);
    }
    .dark #newsListHorizontal a { color: #60a5fa; }
    #newsListHorizontal a:hover { text-decoration: underline; }
    .news-item-source { font-size: 0.75rem; color: #6b7280; margin-top: 0.5rem; text-align: right; }
    .dark .news-item-source { color: #9ca3af; }

    /* Unified Tool Item Card Style */
    .tool-item-card { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
    .tool-item-card:hover {
        transform: scale(1.03);
        box-shadow: 0 8px 25px -5px rgba(0,0,0,0.1), 0 5px 10px -5px rgba(0,0,0,0.04);
    }

    /* Reduced spacing for main sections */
    main > section { margin-bottom: 1.5rem; }
    .tool-category-card-container { space-y: 1.5rem; }

  </style>
</head>
<body class="bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-200 min-h-screen">

  <div id="sidebar-overlay" class="sidebar-overlay"></div>

  <aside id="app-sidebar" class="app-sidebar">
    <div class="p-4 border-b border-slate-200 dark:border-slate-700">
        <a href="#" class="flex items-center gap-2 text-lg font-semibold text-blue-600 dark:text-blue-400">
            <i class="lucide lucide-layout-grid"></i>
            <span>导航分类</span>
        </a>
    </div>
    <ul>
      <li><a href="#info-widgets" class="sidebar-link active"><i class="lucide lucide-layout-dashboard"></i><span>仪表盘</span></a></li>
      <li><a href="#horizontal-news-container" class="sidebar-link"><i class="lucide lucide-newspaper"></i><span>今日新闻</span></a></li>
      <li><a href="#category-life" class="sidebar-link"><i class="lucide lucide-home"></i><span>生活常用</span></a></li>
      <li><a href="#category-study" class="sidebar-link"><i class="lucide lucide-briefcase"></i><span>学习办公</span></a></li>
      <li><a href="#category-dev" class="sidebar-link"><i class="lucide lucide-code-2"></i><span>开发设计</span></a></li>
      <li><a href="#ext-news-sites" class="sidebar-link"><i class="lucide lucide-globe"></i><span>新闻站点</span></a></li>
      <li><a href="#ext-ai" class="sidebar-link"><i class="lucide lucide-brain"></i><span>AI 专区</span></a></li>
      <li><a href="#ext-video" class="sidebar-link"><i class="lucide lucide-youtube"></i><span>视频影音</span></a></li>
      <li><a href="#ext-shopping" class="sidebar-link"><i class="lucide lucide-shopping-cart"></i><span>购物</span></a></li>
      <li><a href="#ext-reading" class="sidebar-link"><i class="lucide lucide-book-open"></i><span>阅读</span></a></li>
      <li><a href="#ext-travel" class="sidebar-link"><i class="lucide lucide-plane"></i><span>出行</span></a></li>
      <li><a href="#ext-others" class="sidebar-link"><i class="lucide lucide-folder-plus"></i><span>其它</span></a></li>
    </ul>
  </aside>

  <header class="bg-white dark:bg-slate-800 shadow-md sticky top-0 z-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <button id="sidebar-toggle" type="button" class="mr-2 p-2 rounded-md text-slate-500 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
            <i class="fas fa-bars w-5 h-5"></i> <span class="sr-only">打开导航</span>
          </button>
          <a href="#" class="flex items-center gap-2 text-xl sm:text-2xl font-bold text-slate-800 dark:text-slate-200">
             {/* Make sure the image path '/tqabc_logo_128x128.png' is correct relative to your domain root */}
             <img src="/tqabc_logo_128x128.png" alt="tqabc Logo" class="h-8 w-auto">
          </a>
        </div>

        <div class="header-search-container hidden sm:flex">
            <select id="search-engine-select" name="search_engine" class="search-engine-select">
                <option value="google" selected>Google</option>
                <option value="baidu">百度</option>
            </select>
            <form action="https://www.google.com/search" method="get" target="_blank" id="super-search-form" class="s-search-form">
              <input type="text" id="super-search-text" name="q" placeholder="Google 搜索..." autocomplete="off" class="s-search-input">
              <button type="submit" class="s-search-button"><i class="fas fa-search"></i></button>
            </form>
        </div>

        <div class="flex items-center">
          <button id="theme-toggle" type="button" class="p-2 rounded-md text-slate-500 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-slate-100 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
            <i class="lucide lucide-sun block dark:hidden w-6 h-6"></i> <i class="lucide lucide-moon hidden dark:block w-6 h-6"></i> <span class="sr-only">切换主题</span>
          </button>
          <button class="ml-2 p-2 rounded-md text-slate-500 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-slate-100 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
            <i class="lucide lucide-settings w-6 h-6"></i> <span class="sr-only">设置</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <div class="main-content-pusher">
    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
      <section class="sm:hidden mb-6" id="mobile-search-container">
         <div class="flex items-center">
             <select id="search-engine-select-mobile" name="search_engine_mobile" class="search-engine-select flex-shrink-0">
                 <option value="google" selected>Google</option>
                 <option value="baidu">百度</option>
             </select>
             <form action="https://www.google.com/search" method="get" target="_blank" id="super-search-form-mobile" class="s-search-form flex-grow">
                 <input type="text" id="super-search-text-mobile" name="q" placeholder="Google 搜索..." autocomplete="off" class="s-search-input">
                 <button type="submit" class="s-search-button"><i class="fas fa-search"></i></button>
             </form>
         </div>
      </section>

      <section class="grid grid-cols-1 md:grid-cols-3 gap-6" id="info-widgets">
        <div class="info-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5 flex items-center gap-4">
          <i class="lucide lucide-cloud-sun text-sky-500 text-4xl"></i>
          <div> <h3 class="font-semibold text-lg text-slate-700 dark:text-slate-200">当前天气</h3> <p class="text-sm text-slate-500 dark:text-slate-400" id="weatherDisplay">加载中...</p> </div>
        </div>
        <div class="info-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5 flex items-center gap-4">
          <i class="lucide lucide-calendar-days text-green-500 text-4xl"></i>
          <div> <h3 class="font-semibold text-lg text-slate-700 dark:text-slate-200">今日日期</h3> <p class="text-sm text-slate-500 dark:text-slate-400" id="dateDisplay">正在加载日期...</p> </div>
        </div>
        <div class="info-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5 flex items-center gap-4">
          <i class="lucide lucide-activity text-purple-500 text-4xl"></i>
          <div> <h3 class="font-semibold text-lg text-slate-700 dark:text-slate-200">站点访问</h3> <p class="text-sm text-slate-500 dark:text-slate-400">1,234 今日</p> </div>
        </div>
      </section>
      
      <section class="horizontal-news-container" id="horizontal-news-container">
        <div class="horizontal-news-header">
          <i class="lucide lucide-newspaper text-red-500 text-2xl"></i>
          <h2 class="text-xl font-semibold text-slate-700 dark:text-slate-200">今日新闻</h2>
        </div>
        <ul id="newsListHorizontal">
          <li id="newsLoadingStatusHorizontal" class="text-slate-500 dark:text-slate-400 p-4">正在加载新闻...</li>
        </ul>
      </section>

      <section class="grid grid-cols-1 lg:grid-cols-1 gap-6">
        <div class="tool-category-card-container space-y-4">
           <div class="tool-category-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5" id="category-life">
            <div class="flex items-center gap-3 mb-4"> <i class="lucide lucide-home text-cyan-500 text-2xl"></i> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200">生活常用</h3> </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
              <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-calculator text-cyan-600 dark:text-cyan-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">单位换算</span> </a>
              <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-map-pin text-cyan-600 dark:text-cyan-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">IP 查询</span> </a>
              <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-qr-code text-cyan-600 dark:text-cyan-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">二维码生成</span> </a>
              <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-clipboard-check text-cyan-600 dark:text-cyan-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">待办清单</span> </a>
            </div>
          </div>
          <div class="tool-category-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5" id="category-study">
            <div class="flex items-center gap-3 mb-4"> <i class="lucide lucide-briefcase text-amber-500 text-2xl"></i> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200">学习办公</h3> </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-languages text-amber-600 dark:text-amber-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">翻译工具</span> </a>
                <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-book-open text-amber-600 dark:text-amber-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">在线词典</span> </a>
                <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-file-text text-amber-600 dark:text-amber-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">文档转换</span> </a>
                <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-highlighter text-amber-600 dark:text-amber-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Markdown编辑器</span> </a>
            </div>
          </div>
          <div class="tool-category-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5" id="category-dev">
            <div class="flex items-center gap-3 mb-4"> <i class="lucide lucide-code-2 text-indigo-500 text-2xl"></i> <h3 class="text-xl font-semibold text-slate-700 dark:text-slate-200">开发设计</h3> </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-file-json-2 text-indigo-600 dark:text-indigo-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">JSON格式化</span> </a>
                <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-palette text-indigo-600 dark:text-indigo-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">调色板</span> </a>
                <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-image text-indigo-600 dark:text-indigo-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">图片压缩</span> </a>
                <a href="#" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-github text-indigo-600 dark:text-indigo-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">GitHub趋势</span> </a>
            </div>
          </div>
        </div>
      </section>

      <section class="tool-category-card-container space-y-4">
        <div id="ext-news-sites" class="tool-category-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5">
          <h4 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4">新闻站点</h4>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
            <a href="https://cn.nytimes.com" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-newspaper text-slate-600 dark:text-slate-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">纽约时报中文网</span> </a>
            <a href="https://www.bbc.com/zhongwen/simp" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-radio-tower text-slate-600 dark:text-slate-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">BBC中文网</span> </a>
            <a href="https://cn.wsj.com/zh-hans" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-landmark text-slate-600 dark:text-slate-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">华尔街日报中文网</span> </a>
            <a href="https://www.ftchinese.com" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-trending-up text-slate-600 dark:text-slate-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">FT中文网</span> </a>
            <a href="https://www.dw.com/zh" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-radio text-slate-600 dark:text-slate-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">德国之声中文网</span> </a>
            <a href="https://news.stheadline.com" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-file-text text-slate-600 dark:text-slate-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">星岛日报</span> </a>
            <a href="https://china.kyodonews.net/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-globe-2 text-slate-600 dark:text-slate-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">共同网中文</span> </a>
            <a href="https://www.rfi.fr/cn/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-podcast text-slate-600 dark:text-slate-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">法国国际广播电台</span> </a>
          </div>
        </div>

        <div id="ext-ai" class="tool-category-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5">
          <h4 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4">AI 专区</h4>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
            <a href="https://chatgpt.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-bot text-sky-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">ChatGPT</span> </a>
            <a href="https://gemini.google.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-sparkles text-purple-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Gemini</span> </a>
            <a href="https://copilot.microsoft.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-brain text-teal-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Copilot</span> </a>
            <a href="https://grok.com/?referrer=website" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-message-circle text-indigo-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Grok</span> </a>
            <a href="https://chat.deepseek.com/sign_in" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-search-code text-emerald-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">DeepSeek</span> </a>
            <a href="https://yuanbao.tencent.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-gem text-rose-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">腾讯元宝</span> </a>
          </div>
        </div>
        <div id="ext-video" class="tool-category-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5">
          <h4 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4">视频影音</h4>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
            <a href="https://www.youtube.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-youtube text-red-600 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">YouTube</span> </a>
            <a href="https://www.bilibili.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-tv text-pink-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Bilibili</span> </a>
            <a href="https://www.yfsp.tv/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-film text-orange-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">爱壹帆</span> </a>
            <a href="https://www.tiktok.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-music-2 text-black dark:text-white text-3xl mb-2"></i> <span class="text-sm font-medium text-center">TikTok</span> </a>
            <a href="https://x.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-twitter text-sky-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">X (Twitter)</span> </a>
            <a href="https://www.xiaohongshu.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-book-copy text-red-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">小红书</span> </a>
            <a href="https://www.facebook.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-facebook text-blue-600 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Facebook</span> </a>
            <a href="https://www.instagram.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-instagram text-purple-600 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Instagram</span> </a>
            </div>
        </div>
         <div id="ext-shopping" class="tool-category-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5">
            <h4 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4">购物</h4>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                <a href="https://www.amazon.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-shopping-bag text-orange-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Amazon</span> </a>
                <a href="https://www.taobao.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-store text-red-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">淘宝</span> </a>
                <a href="https://www.homedepot.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-hammer text-orange-600 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Home Depot</span> </a>
                <a href="https://www.temu.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-package-search text-orange-400 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Temu</span> </a>
                <a href="https://www.walmart.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-shopping-cart text-blue-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Walmart</span> </a>
                <a href="https://www.target.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-target text-red-600 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Target</span> </a>
                <a href="https://www.ikea.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-lamp-desk text-yellow-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">宜家家居</span> </a>
                <a href="https://www.sayweee.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-carrot text-green-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Weee生鲜</span> </a>
            </div>
        </div>
        <div id="ext-reading" class="tool-category-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5">
            <h4 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4">阅读</h4>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                <a href="https://v.flomoapp.com/mine" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-edit-3 text-green-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">flomo浮墨笔记</span> </a>
                <a href="https://www.zhihu.com" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-book-marked text-blue-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">知乎</span> </a>
                <a href="https://zh.1lib.sk/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-library text-orange-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Z-Library</span> </a>
                <a href="https://m.douban.com/home_guide" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-beans text-green-600 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">豆瓣</span> </a>
            </div>
        </div>
         <div id="ext-travel" class="tool-category-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5">
            <h4 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4">出行</h4>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                <a href="https://www.ctrip.com" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-briefcase text-orange-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">携程旅行</span> </a>
                <a href="https://www.airbnb.com" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-home-heart text-red-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Airbnb</span> </a>
                <a href="https://www.booking.com" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-hotel text-blue-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Booking</span> </a>
                <a href="https://www.yelp.com" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-utensils-crossed text-red-600 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">Yelp</span> </a>
            </div>
        </div>
         <div id="ext-others" class="tool-category-card bg-white dark:bg-slate-800 rounded-xl shadow-lg p-5">
            <h4 class="text-xl font-semibold text-slate-700 dark:text-slate-200 mb-4">其它</h4>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                <a href="https://www.calorietech.com/blog/plan" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-dumbbell text-green-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">KEEP</span> </a>
                <a href="https://sfz.tools.likunming.cn" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-image-plus text-indigo-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">图片加水印</span> </a>
                <a href="https://tingfm.com/" target="_blank" class="tool-item-card flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"> <i class="lucide lucide-radio text-sky-500 text-3xl mb-2"></i> <span class="text-sm font-medium text-center">TingFM电台</span> </a>
            </div>
        </div>
      </section>
    </main>

    <footer class="bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 mt-12">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center text-sm text-slate-500 dark:text-slate-400">
        <p>© <span id="currentYear"></span> tqabc.com. 保留所有权利.</p>
        <p class="mt-1">由 Gemini 精心设计与构建。</p>
      </div>
    </footer>
  </div> <script>
    // --- THEME TOGGLE ---
    const themeToggleBtn = document.getElementById('theme-toggle');
    const htmlElement = document.documentElement;
    if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      htmlElement.classList.add('dark');
    } else {
      htmlElement.classList.remove('dark');
    }
    themeToggleBtn.addEventListener('click', () => {
      htmlElement.classList.toggle('dark');
      localStorage.setItem('theme', htmlElement.classList.contains('dark') ? 'dark' : 'light');
    });

    // --- SIDEBAR TOGGLE ---
    const sidebarToggleBtn = document.getElementById('sidebar-toggle');
    const appSidebar = document.getElementById('app-sidebar');
    const bodyEl = document.body;
    const sidebarOverlay = document.getElementById('sidebar-overlay');

    sidebarToggleBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      bodyEl.classList.toggle('sidebar-open');
    });
    if (sidebarOverlay) {
        sidebarOverlay.addEventListener('click', () => {
            bodyEl.classList.remove('sidebar-open');
        });
    }
    document.addEventListener('click', function(event) {
        if (window.innerWidth < 1024) { // lg breakpoint
            const isClickInsideSidebar = appSidebar.contains(event.target);
            const isClickOnToggler = sidebarToggleBtn.contains(event.target);
            if (!isClickInsideSidebar && !isClickOnToggler && bodyEl.classList.contains('sidebar-open')) {
                bodyEl.classList.remove('sidebar-open');
            }
        }
    });

    // --- ADVANCED SEARCH LOGIC (Header and Mobile) ---
    const searchEngines = {
        google: { action: "https://www.google.com/search", placeholder: "Google 搜索...", name: "q" },
        baidu: { action: "https://www.baidu.com/s", placeholder: "百度一下", name: "wd" }
        // Add more engines here
    };

    function setupSearchForm(formId, inputId, selectId) {
        const searchForm = document.getElementById(formId);
        const searchInput = document.getElementById(inputId);
        const engineSelect = document.getElementById(selectId);

        function updateSearchEngineState() {
            const selectedEngine = engineSelect.value;
            const engineData = searchEngines[selectedEngine];

            if (engineData && searchForm && searchInput) {
                searchForm.action = engineData.action;
                searchInput.placeholder = engineData.placeholder;
                searchInput.name = engineData.name;
            }
        }
        engineSelect.addEventListener('change', updateSearchEngineState);

        if (searchForm) {
            searchForm.addEventListener('submit', function(e) {
                if (searchInput && searchInput.value.trim() === '') {
                    searchInput.focus();
                    e.preventDefault(); // Prevent empty search
                    return false;
                }
            });
        }
        updateSearchEngineState(); // Initial call
    }
    setupSearchForm('super-search-form', 'super-search-text', 'search-engine-select'); // For header search
    setupSearchForm('super-search-form-mobile', 'super-search-text-mobile', 'search-engine-select-mobile'); // For mobile search


    // --- SIDEBAR LINK SMOOTH SCROLL & ACTIVE STATE ---
    const sidebarLinks = document.querySelectorAll('.sidebar-link');
    sidebarLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        sidebarLinks.forEach(l => l.classList.remove('active'));
        this.classList.add('active');
        const targetId = this.getAttribute('href');
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          const headerOffset = document.querySelector('header').offsetHeight || 64;
          const elementPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;
          const offsetPosition = elementPosition - headerOffset - 20; // 20px extra offset for better spacing
          window.scrollTo({ top: offsetPosition, behavior: "smooth" });
        }
        if (window.innerWidth < 1024 && bodyEl.classList.contains('sidebar-open')) { // lg breakpoint
            bodyEl.classList.remove('sidebar-open');
        }
      });
    });

    // --- DATE DISPLAY ---
    function loadDate() {
      const dateDisplayEl = document.getElementById("dateDisplay");
      if (dateDisplayEl) {
        const now = new Date();
        dateDisplayEl.textContent = now.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });
      }
    }

    // --- WEATHER DISPLAY ---
    async function loadWeather() {
      const weatherDisplayEl = document.getElementById("weatherDisplay");
      if (!weatherDisplayEl) return;
      try {
        let city = '未知城市', lat, lon;
        try {
            const ipRes = await fetch('https://ipapi.co/json/'); // HTTPS
            if (!ipRes.ok) throw new Error(`IP API (ipapi.co) failed: ${ipRes.status}`);
            const ipData = await ipRes.json();
            city = ipData.city || city; lat = ipData.latitude; lon = ipData.longitude;
        } catch (e) {
            console.warn("Primary IP API failed, trying fallback:", e.message);
            try {
                // Use HTTPS for the fallback API as well
                const fallbackIpRes = await fetch('https://ip-api.com/json/'); // Changed to HTTPS
                if (!fallbackIpRes.ok) throw new Error(`Fallback IP API (ip-api.com) failed: ${fallbackIpRes.status}`);
                const fallbackIpData = await fallbackIpRes.json();
                city = fallbackIpData.city || city; lat = fallbackIpData.lat; lon = fallbackIpData.lon;
            } catch (e2) {
                console.error("All IP APIs failed:", e2.message);
                throw new Error('无法确定位置信息');
            }
        }
        if (!lat || !lon) throw new Error('无法获取经纬度');
        // Weather API is already HTTPS
        const weatherRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=temperature_2m,weathercode`);
        if (!weatherRes.ok) throw new Error(`Weather API failed: ${weatherRes.status}`);
        const weatherData = await weatherRes.json();
        if (weatherData && weatherData.current_weather) {
          weatherDisplayEl.innerHTML = `${city} 当前气温：${weatherData.current_weather.temperature}°C`;
        } else { weatherDisplayEl.innerText = '无法获取天气数据'; }
      } catch (e) {
        console.error("Weather loading error:", e);
        weatherDisplayEl.innerText = `天气加载失败 (${e.message})`;
      }
    }

    // --- NEWS DISPLAY (HORIZONTAL) ---
    async function loadNewsHorizontal() {
      const newsListEl = document.getElementById("newsListHorizontal");
      const newsLoadingStatusEl = document.getElementById("newsLoadingStatusHorizontal");
      
      if (!newsListEl) { console.error("Element with ID 'newsListHorizontal' not found."); return; }
      if (newsLoadingStatusEl) newsLoadingStatusEl.textContent = '正在加载新闻...';


      const rssUrl = "https://www.36kr.com/feed"; 
      const newsSourceName = "36Kr";
      // RSS to JSON API is already HTTPS
      const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;
      const maxNewsItems = 10; 

      try {
        const response = await fetch(apiUrl);
        if (!response.ok) throw new Error(`新闻服务请求失败，状态码: ${response.status}`);
        const data = await response.json();

        if (data.status === "ok" && data.items && data.items.length > 0) {
          if(newsLoadingStatusEl) newsLoadingStatusEl.remove(); 
          newsListEl.innerHTML = ""; 
          
          data.items.slice(0, maxNewsItems).forEach(item => {
            const listItem = document.createElement("li");
            
            const link = document.createElement("a");
            link.href = item.link;
            link.textContent = item.title;
            link.target = "_blank"; link.rel = "noopener noreferrer";

            const source = document.createElement("p");
            source.className = "news-item-source";
            source.textContent = newsSourceName; 

            listItem.appendChild(link);
            listItem.appendChild(source);
            newsListEl.appendChild(listItem);
          });
        } else {
          let errorMessage = `无法加载新闻条目。`;
          if (data.message) { errorMessage += ` (API信息: ${data.message})`; }
          else if (data.items && data.items.length === 0) { errorMessage += ` (来源没有新闻)`; }
          else { errorMessage += ` (数据格式不正确或来源无内容)`; }
          if (newsLoadingStatusEl) newsLoadingStatusEl.remove();
          newsListEl.innerHTML = `<li class="text-red-500 p-4">${errorMessage}</li>`;
        }
      } catch (e) {
        console.error("News loading error:", e);
        let displayErrorMessage = `新闻加载失败`;
        if (e.message.includes("状态码")) { displayErrorMessage += ` (${e.message})`; }
        else if (e.message.toLowerCase().includes("failed to fetch")) { displayErrorMessage += ` (网络错误或无法连接到新闻服务)`; }
        else { displayErrorMessage += ` (未知错误)`; }
        if (newsLoadingStatusEl) newsLoadingStatusEl.remove();
        newsListEl.innerHTML = `<li class="text-red-500 p-4">${displayErrorMessage}</li>`;
      }
    }


    // --- CURRENT YEAR ---
    function setCurrentYear() {
      const yearEl = document.getElementById('currentYear');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
    }

    // --- INITIALIZE ON DOM LOAD ---
    document.addEventListener('DOMContentLoaded', () => {
      loadDate(); 
      loadWeather(); 
      loadNewsHorizontal(); 
      setCurrentYear();
    });
  </script>
</body>
</html>
